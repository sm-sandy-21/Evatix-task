import { useLayoutEffect, useMemo } from 'react';
import { createPortal } from 'react-dom';
import { appendPortalContainer, createContainer, removePortalContainer, removePortalParentContainerIfNoMorePortals } from '../utils/portal-dom-utils';
export default function InternalPortal(props) {
  const {
    zIndex,
    children
  } = props;
  const container = useMemo(() => createContainer(zIndex), [zIndex]);
  useLayoutEffect(() => {
    appendPortalContainer(container);
    return () => {
      removePortalContainer(container);
      removePortalParentContainerIfNoMorePortals();
    };
  }, [container]);
  return /*#__PURE__*/createPortal(children, container);
}