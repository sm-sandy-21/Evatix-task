{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { selectionCacheContext, selectionManagerContext } from '../../util/contextNamespace';\n\nvar DropdownItemSelectionManager = /*#__PURE__*/function (_Component) {\n  _inherits(DropdownItemSelectionManager, _Component);\n\n  var _super = _createSuper(DropdownItemSelectionManager);\n\n  function DropdownItemSelectionManager() {\n    var _this;\n\n    _classCallCheck(this, DropdownItemSelectionManager);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemSelected\", function (itemId, isSelected, defaultSelected) {\n      var _this$props = _this.props,\n          behavior = _this$props.behavior,\n          groupId = _this$props.groupId;\n\n      var setSelected = function setSelected(finalBool) {\n        if (behavior === 'checkbox' || behavior === 'menuitemcheckbox') {\n          _this.setCheckboxItemSelected(itemId, finalBool);\n        } else if (behavior === 'radio' || behavior === 'menuitemradio') {\n          _this.setRadioItemSelected(itemId, finalBool);\n        }\n      }; // If a radio or checkbox item has defaultSelected set on it, that it will try to set its\n      // selected state to true each time it mounts (which happens whenever the dropdown is re-\n      // opened by the user. The following check makes sure that the defaultSelected behaviour\n      // only applies on the first mount of the radio/checkbox.\n\n\n      if (typeof isSelected === 'boolean') {\n        // If isSelected is explicitly provided, set it to that\n        setSelected(isSelected);\n      } else if (defaultSelected) {\n        if (!_this.hasAlreadyAppliedDefaultSelected(itemId)) {\n          // If using defaultSelected and this is first mount, select the item\n          setSelected(true);\n\n          _this.context[selectionCacheContext].markItemAsDefaultApplied(groupId, itemId);\n        } else {\n          // If using defaultSelected and not first mount, set isSelected to cached value\n          setSelected(_this.isItemSelectedInCache(itemId));\n        }\n      } else {\n        setSelected(_this.isItemSelectedInCache(itemId));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCheckboxItemSelected\", function (itemId, isSelected) {\n      var cache = _this.context[selectionCacheContext];\n      var alreadySelected = cache.itemsInGroup(_this.props.groupId);\n      var isAlreadySelected = cache.isItemSelected(_this.props.groupId, itemId);\n\n      if (isSelected && !isAlreadySelected) {\n        _this.updateCacheContextWithSelections([].concat(_toConsumableArray(alreadySelected), [{\n          id: itemId,\n          groupId: _this.props.groupId\n        }]));\n      } else if (!isSelected && isAlreadySelected) {\n        var withoutCurrentItem = alreadySelected.filter(function (item) {\n          return item.id !== itemId;\n        });\n\n        _this.updateCacheContextWithSelections(withoutCurrentItem);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRadioItemSelected\", function (itemId, isSelected) {\n      var cache = _this.context[selectionCacheContext];\n      var isAlreadySelected = cache.isItemSelected(_this.props.groupId, itemId);\n\n      if (isAlreadySelected && !isSelected) {\n        _this.updateCacheContextWithSelections([]);\n      } else if (!isAlreadySelected && isSelected) {\n        _this.updateCacheContextWithSelections([{\n          id: itemId,\n          groupId: _this.props.groupId\n        }]);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isItemSelectedInCache\", function (itemId) {\n      return _this.context[selectionCacheContext].isItemSelected(_this.props.groupId, itemId);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemClicked\", function (clickedItemId) {\n      var behavior = _this.props.behavior;\n\n      if (behavior === 'checkbox' || behavior === 'menuitemcheckbox') {\n        _this.handleCheckboxItemClicked(clickedItemId);\n      } else if (behavior === 'radio' || behavior === 'menuitemradio') {\n        _this.handleRadioItemClicked(clickedItemId);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasAlreadyAppliedDefaultSelected\", function (itemId) {\n      return _this.context[selectionCacheContext].hasItemAlreadyHadDefaultSelectedApplied(_this.props.groupId, itemId);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCheckboxItemClicked\", function (clickedItemId) {\n      var cache = _this.context[selectionCacheContext];\n      var itemsInGroup = cache.itemsInGroup(_this.props.groupId);\n      var newSelections = cache.isItemSelected(_this.props.groupId, clickedItemId) ? itemsInGroup.filter(function (item) {\n        return item.id !== clickedItemId;\n      }) : [].concat(_toConsumableArray(itemsInGroup), [{\n        id: clickedItemId,\n        groupId: _this.props.groupId\n      }]);\n\n      _this.updateCacheContextWithSelections(newSelections);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRadioItemClicked\", function (clickedItemId) {\n      _this.updateCacheContextWithSelections([{\n        id: clickedItemId,\n        groupId: _this.props.groupId\n      }]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateCacheContextWithSelections\", function (itemSelections) {\n      _this.context[selectionCacheContext].itemSelectionsChanged(_this.props.groupId, itemSelections);\n    });\n\n    return _this;\n  }\n\n  _createClass(DropdownItemSelectionManager, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return _defineProperty({}, selectionManagerContext, {\n        isItemSelected: function isItemSelected(itemId) {\n          return _this2.context[selectionCacheContext].isItemSelected(_this2.props.groupId, itemId);\n        },\n        itemClicked: this.handleItemClicked,\n        setItemSelected: this.setItemSelected\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", null, this.props.children);\n    }\n  }]);\n\n  return DropdownItemSelectionManager;\n}(Component);\n\n_defineProperty(DropdownItemSelectionManager, \"childContextTypes\", _defineProperty({}, selectionManagerContext, PropTypes.object));\n\n_defineProperty(DropdownItemSelectionManager, \"contextTypes\", _defineProperty({}, selectionCacheContext, PropTypes.object.isRequired));\n\nexport { DropdownItemSelectionManager as default };","map":{"version":3,"sources":["/home/sandy/Documents/evatix/create-components/node_modules/@atlaskit/dropdown-menu/dist/esm/components/context/DropdownItemSelectionManager.js"],"names":["_toConsumableArray","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","React","Component","PropTypes","selectionCacheContext","selectionManagerContext","DropdownItemSelectionManager","_Component","_super","_this","_len","length","args","Array","_key","concat","itemId","isSelected","defaultSelected","_this$props","props","behavior","groupId","setSelected","finalBool","setCheckboxItemSelected","setRadioItemSelected","hasAlreadyAppliedDefaultSelected","context","markItemAsDefaultApplied","isItemSelectedInCache","cache","alreadySelected","itemsInGroup","isAlreadySelected","isItemSelected","updateCacheContextWithSelections","id","withoutCurrentItem","filter","item","clickedItemId","handleCheckboxItemClicked","handleRadioItemClicked","hasItemAlreadyHadDefaultSelectedApplied","newSelections","itemSelections","itemSelectionsChanged","key","value","getChildContext","_this2","itemClicked","handleItemClicked","setItemSelected","render","createElement","children","object","isRequired","default"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { selectionCacheContext, selectionManagerContext } from '../../util/contextNamespace';\n\nvar DropdownItemSelectionManager = /*#__PURE__*/function (_Component) {\n  _inherits(DropdownItemSelectionManager, _Component);\n\n  var _super = _createSuper(DropdownItemSelectionManager);\n\n  function DropdownItemSelectionManager() {\n    var _this;\n\n    _classCallCheck(this, DropdownItemSelectionManager);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemSelected\", function (itemId, isSelected, defaultSelected) {\n      var _this$props = _this.props,\n          behavior = _this$props.behavior,\n          groupId = _this$props.groupId;\n\n      var setSelected = function setSelected(finalBool) {\n        if (behavior === 'checkbox' || behavior === 'menuitemcheckbox') {\n          _this.setCheckboxItemSelected(itemId, finalBool);\n        } else if (behavior === 'radio' || behavior === 'menuitemradio') {\n          _this.setRadioItemSelected(itemId, finalBool);\n        }\n      }; // If a radio or checkbox item has defaultSelected set on it, that it will try to set its\n      // selected state to true each time it mounts (which happens whenever the dropdown is re-\n      // opened by the user. The following check makes sure that the defaultSelected behaviour\n      // only applies on the first mount of the radio/checkbox.\n\n\n      if (typeof isSelected === 'boolean') {\n        // If isSelected is explicitly provided, set it to that\n        setSelected(isSelected);\n      } else if (defaultSelected) {\n        if (!_this.hasAlreadyAppliedDefaultSelected(itemId)) {\n          // If using defaultSelected and this is first mount, select the item\n          setSelected(true);\n\n          _this.context[selectionCacheContext].markItemAsDefaultApplied(groupId, itemId);\n        } else {\n          // If using defaultSelected and not first mount, set isSelected to cached value\n          setSelected(_this.isItemSelectedInCache(itemId));\n        }\n      } else {\n        setSelected(_this.isItemSelectedInCache(itemId));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCheckboxItemSelected\", function (itemId, isSelected) {\n      var cache = _this.context[selectionCacheContext];\n      var alreadySelected = cache.itemsInGroup(_this.props.groupId);\n      var isAlreadySelected = cache.isItemSelected(_this.props.groupId, itemId);\n\n      if (isSelected && !isAlreadySelected) {\n        _this.updateCacheContextWithSelections([].concat(_toConsumableArray(alreadySelected), [{\n          id: itemId,\n          groupId: _this.props.groupId\n        }]));\n      } else if (!isSelected && isAlreadySelected) {\n        var withoutCurrentItem = alreadySelected.filter(function (item) {\n          return item.id !== itemId;\n        });\n\n        _this.updateCacheContextWithSelections(withoutCurrentItem);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRadioItemSelected\", function (itemId, isSelected) {\n      var cache = _this.context[selectionCacheContext];\n      var isAlreadySelected = cache.isItemSelected(_this.props.groupId, itemId);\n\n      if (isAlreadySelected && !isSelected) {\n        _this.updateCacheContextWithSelections([]);\n      } else if (!isAlreadySelected && isSelected) {\n        _this.updateCacheContextWithSelections([{\n          id: itemId,\n          groupId: _this.props.groupId\n        }]);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isItemSelectedInCache\", function (itemId) {\n      return _this.context[selectionCacheContext].isItemSelected(_this.props.groupId, itemId);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemClicked\", function (clickedItemId) {\n      var behavior = _this.props.behavior;\n\n      if (behavior === 'checkbox' || behavior === 'menuitemcheckbox') {\n        _this.handleCheckboxItemClicked(clickedItemId);\n      } else if (behavior === 'radio' || behavior === 'menuitemradio') {\n        _this.handleRadioItemClicked(clickedItemId);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasAlreadyAppliedDefaultSelected\", function (itemId) {\n      return _this.context[selectionCacheContext].hasItemAlreadyHadDefaultSelectedApplied(_this.props.groupId, itemId);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCheckboxItemClicked\", function (clickedItemId) {\n      var cache = _this.context[selectionCacheContext];\n      var itemsInGroup = cache.itemsInGroup(_this.props.groupId);\n      var newSelections = cache.isItemSelected(_this.props.groupId, clickedItemId) ? itemsInGroup.filter(function (item) {\n        return item.id !== clickedItemId;\n      }) : [].concat(_toConsumableArray(itemsInGroup), [{\n        id: clickedItemId,\n        groupId: _this.props.groupId\n      }]);\n\n      _this.updateCacheContextWithSelections(newSelections);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRadioItemClicked\", function (clickedItemId) {\n      _this.updateCacheContextWithSelections([{\n        id: clickedItemId,\n        groupId: _this.props.groupId\n      }]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateCacheContextWithSelections\", function (itemSelections) {\n      _this.context[selectionCacheContext].itemSelectionsChanged(_this.props.groupId, itemSelections);\n    });\n\n    return _this;\n  }\n\n  _createClass(DropdownItemSelectionManager, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return _defineProperty({}, selectionManagerContext, {\n        isItemSelected: function isItemSelected(itemId) {\n          return _this2.context[selectionCacheContext].isItemSelected(_this2.props.groupId, itemId);\n        },\n        itemClicked: this.handleItemClicked,\n        setItemSelected: this.setItemSelected\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", null, this.props.children);\n    }\n  }]);\n\n  return DropdownItemSelectionManager;\n}(Component);\n\n_defineProperty(DropdownItemSelectionManager, \"childContextTypes\", _defineProperty({}, selectionManagerContext, PropTypes.object));\n\n_defineProperty(DropdownItemSelectionManager, \"contextTypes\", _defineProperty({}, selectionCacheContext, PropTypes.object.isRequired));\n\nexport { DropdownItemSelectionManager as default };"]},"metadata":{},"sourceType":"module"}