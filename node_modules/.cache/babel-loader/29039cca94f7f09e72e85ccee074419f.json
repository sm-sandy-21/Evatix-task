{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport find from 'array-find';\nimport PropTypes from 'prop-types';\nimport { selectionCacheContext } from '../../util/contextNamespace';\n\nvar isItemInList = function isItemInList(itemList, itemId, groupId) {\n  return Boolean(find(itemList, function (item) {\n    return item.id === itemId && item.groupId === groupId;\n  }));\n};\n\nvar DropdownItemSelectionCache = /*#__PURE__*/function (_Component) {\n  _inherits(DropdownItemSelectionCache, _Component);\n\n  var _super = _createSuper(DropdownItemSelectionCache);\n\n  function DropdownItemSelectionCache() {\n    var _this;\n\n    _classCallCheck(this, DropdownItemSelectionCache);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      lastCacheUpdate: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectedItems\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"alreadyDefaultedItems\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemSelectionsChanged\", function (groupId, newGroupSelections) {\n      var newSelectedItems = [].concat(_toConsumableArray(_this.selectedItems.filter(function (item) {\n        return item.groupId !== groupId;\n      })), _toConsumableArray(newGroupSelections));\n      _this.selectedItems = newSelectedItems; // We store selectedItems in an instance variable (this.selectedItems) instead of state,\n      // because if multiple children update the cache at the same time it causes unexpected\n      // behaviour due to the asynchronous behaviour of setState. So we need to trigger setState\n      // with a different value to cause the children to be updated with their new selection values.\n\n      _this.setState({\n        lastCacheUpdate: Date.now()\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(DropdownItemSelectionCache, [{\n    key: \"getChildContext\",\n    // eslint-disable-line react/sort-comp\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return _defineProperty({}, selectionCacheContext, {\n        // This function returns true/false describing whether the supplied navigation item\n        // (which must have a unique item and group ID) is currently selected - this is used\n        // by radio and checkbox dropdown items to retreive their 'selected' state when they\n        // re-mount, which happens when the dropdown is closed and then re-opened.\n        isItemSelected: function isItemSelected(groupId, itemId) {\n          return isItemInList(_this2.selectedItems, itemId, groupId);\n        },\n        itemsInGroup: function itemsInGroup(groupId) {\n          return _this2.selectedItems.filter(function (item) {\n            return item.groupId === groupId;\n          });\n        },\n        itemSelectionsChanged: this.handleItemSelectionsChanged,\n        hasItemAlreadyHadDefaultSelectedApplied: function hasItemAlreadyHadDefaultSelectedApplied(groupId, itemId) {\n          return isItemInList(_this2.alreadyDefaultedItems, itemId, groupId);\n        },\n        markItemAsDefaultApplied: function markItemAsDefaultApplied(groupId, itemId) {\n          _this2.alreadyDefaultedItems.push({\n            id: itemId,\n            groupId: groupId\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", null, this.props.children);\n    }\n  }]);\n\n  return DropdownItemSelectionCache;\n}(Component);\n\n_defineProperty(DropdownItemSelectionCache, \"childContextTypes\", _defineProperty({}, selectionCacheContext, PropTypes.shape({\n  isItemSelected: PropTypes.func,\n  itemsInGroup: PropTypes.func,\n  itemSelectionsChanged: PropTypes.func\n})));\n\nexport { DropdownItemSelectionCache as default };","map":{"version":3,"sources":["/home/sandy/Documents/evatix/create-components/node_modules/@atlaskit/dropdown-menu/dist/esm/components/context/DropdownItemSelectionCache.js"],"names":["_toConsumableArray","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","React","Component","find","PropTypes","selectionCacheContext","isItemInList","itemList","itemId","groupId","Boolean","item","id","DropdownItemSelectionCache","_Component","_super","_this","_len","length","args","Array","_key","concat","lastCacheUpdate","newGroupSelections","newSelectedItems","selectedItems","filter","setState","now","key","value","getChildContext","_this2","isItemSelected","itemsInGroup","itemSelectionsChanged","handleItemSelectionsChanged","hasItemAlreadyHadDefaultSelectedApplied","alreadyDefaultedItems","markItemAsDefaultApplied","push","render","createElement","props","children","shape","func","default"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport find from 'array-find';\nimport PropTypes from 'prop-types';\nimport { selectionCacheContext } from '../../util/contextNamespace';\n\nvar isItemInList = function isItemInList(itemList, itemId, groupId) {\n  return Boolean(find(itemList, function (item) {\n    return item.id === itemId && item.groupId === groupId;\n  }));\n};\n\nvar DropdownItemSelectionCache = /*#__PURE__*/function (_Component) {\n  _inherits(DropdownItemSelectionCache, _Component);\n\n  var _super = _createSuper(DropdownItemSelectionCache);\n\n  function DropdownItemSelectionCache() {\n    var _this;\n\n    _classCallCheck(this, DropdownItemSelectionCache);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      lastCacheUpdate: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectedItems\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"alreadyDefaultedItems\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemSelectionsChanged\", function (groupId, newGroupSelections) {\n      var newSelectedItems = [].concat(_toConsumableArray(_this.selectedItems.filter(function (item) {\n        return item.groupId !== groupId;\n      })), _toConsumableArray(newGroupSelections));\n      _this.selectedItems = newSelectedItems; // We store selectedItems in an instance variable (this.selectedItems) instead of state,\n      // because if multiple children update the cache at the same time it causes unexpected\n      // behaviour due to the asynchronous behaviour of setState. So we need to trigger setState\n      // with a different value to cause the children to be updated with their new selection values.\n\n      _this.setState({\n        lastCacheUpdate: Date.now()\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(DropdownItemSelectionCache, [{\n    key: \"getChildContext\",\n    // eslint-disable-line react/sort-comp\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return _defineProperty({}, selectionCacheContext, {\n        // This function returns true/false describing whether the supplied navigation item\n        // (which must have a unique item and group ID) is currently selected - this is used\n        // by radio and checkbox dropdown items to retreive their 'selected' state when they\n        // re-mount, which happens when the dropdown is closed and then re-opened.\n        isItemSelected: function isItemSelected(groupId, itemId) {\n          return isItemInList(_this2.selectedItems, itemId, groupId);\n        },\n        itemsInGroup: function itemsInGroup(groupId) {\n          return _this2.selectedItems.filter(function (item) {\n            return item.groupId === groupId;\n          });\n        },\n        itemSelectionsChanged: this.handleItemSelectionsChanged,\n        hasItemAlreadyHadDefaultSelectedApplied: function hasItemAlreadyHadDefaultSelectedApplied(groupId, itemId) {\n          return isItemInList(_this2.alreadyDefaultedItems, itemId, groupId);\n        },\n        markItemAsDefaultApplied: function markItemAsDefaultApplied(groupId, itemId) {\n          _this2.alreadyDefaultedItems.push({\n            id: itemId,\n            groupId: groupId\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", null, this.props.children);\n    }\n  }]);\n\n  return DropdownItemSelectionCache;\n}(Component);\n\n_defineProperty(DropdownItemSelectionCache, \"childContextTypes\", _defineProperty({}, selectionCacheContext, PropTypes.shape({\n  isItemSelected: PropTypes.func,\n  itemsInGroup: PropTypes.func,\n  itemSelectionsChanged: PropTypes.func\n})));\n\nexport { DropdownItemSelectionCache as default };"]},"metadata":{},"sourceType":"module"}